{"version":3,"sources":["webpack:///src/app/modules/application/application-attribute-options/application-attribute-options.component.ts","webpack:///src/app/modules/application/application-attribute-options/application-attribute-options.component.html","webpack:///src/app/modules/application/application-view/application-view.component.html","webpack:///src/app/modules/application/application-view/application-view.component.ts","webpack:///src/app/modules/application/application.module.ts","webpack:///src/app/modules/application/application/application.component.html","webpack:///src/app/modules/application/application/application.component.ts","webpack:///src/app/modules/application/test/test.component.ts","webpack:///src/app/modules/application/test/test.component.html"],"names":["ApplicationAttributeOptionsComponent","formBuilder","localdata","attributeOptions","showDescription","buildForm","staticData","values","get","attrId","id","replace","toLowerCase","form","group","value","required","invalid","alert","formValues","translations","map","x","keyVal","langId","Number","language","data","Date","getTime","editId","push","reset","saveLocalData","setTimeout","option","patchValue","appendCurrentTranslations","removeControl","addControl","array","forEach","toString","sure","confirm","filter","toSave","oldvalues","save","add","selector","templateUrl","styleUrls","ApplicationViewComponent","api","router","wait","applicationAttributes","showModal","isExistingAttribute","allAttributes","activeTab","application","applicationForm","getAllAttributes","appId","systemId","getApplicationAttribute","Object","attrs","attbId","length","list","subscribe","roleAttr","console","log","type","existing","app","modalTitle","saveButtonText","attbType","markAllAsTouched","attribute","attbTitle","create","updateAttribute","oldId","allOptions","keys","atributeOptions","newAttrId","oldAttbId","roleAttributeId","toPromise","formValue","appAtribute","newAppId","systemDescription","apps","start","end","navigate","update","cancel","showAppForm","closeModal","submitForm","routes","path","component","ApplicationModule","forChild","declarations","imports","ApplicationComponent","applications","loadData","lstApplications","englishExist","descriptions","includes","createApplication","saved","found","oldSystemId","TestComponent","fb","name"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACQM;;;;;;AAA4C,2FAAuB,MAAvB,EAAuB,WAAvB;;;;;;;;AAO9C;;AAAuE;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAM;;;;;;;;AAc5F;;AACI;;AACI;;;;AACJ;;AACA;;AACI;;AACJ;;AACA;;AACI;;AACI;;AACI;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AADJ;;AAGJ;;AACJ;;AACA;;AACI;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAI;;AAAK;;AAAE;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4B;;AAAM;;AAC9E;;AACJ;;;;;;AAfQ;;AAAA;;AAGA;;AAAA;;AAMiD;;AAAA;;;;UD9BxDA,oC;AAQX,sDACUC,WADV,EAEUC,SAFV,EAEqC;AAAA;;AAD3B,eAAAD,WAAA,GAAAA,WAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AAPH,eAAAC,gBAAA,GAAmB,EAAnB;AACA,eAAAC,eAAA,GAAkB,IAAlB;AAOF;;;;qCAEG;AACN,iBAAKC,SAAL;;AAEA,gBAAI,yEAAYC,UAAhB,EAA2B;AACzB,kBAAMC,MAAM,GAAG,KAAKL,SAAL,CAAeM,GAAf,CAAmB,kBAAnB,CAAf;;AACA,kBAAI,CAACD,MAAL,EAAY;AACV;AACD;;AAED,kBAAME,MAAM,GAAG,KAAKC,EAAL,CAAQC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4BC,WAA5B,EAAf;AACA,mBAAKT,gBAAL,GAAwBI,MAAM,qBAAcE,MAAd,EAAN,IAAiC,EAAzD;AACA;AACD;AACF;;;sCAEgB;AACf,iBAAKI,IAAL,GAAY,KAAKZ,WAAL,CAAiBa,KAAjB,CAAuB;AACjCC,mBAAK,EAAE,CAAC,EAAD,EAAK,0DAAWC,QAAhB;AAD0B,aAAvB,CAAZ;AAGD;;;gCAEE;AAAA;;AACD,gBAAI,KAAKH,IAAL,CAAUI,OAAd,EAAuB;AACrBC,mBAAK,CAAC,yBAAD,CAAL;AACA;AACD;;AAED,gBAAMC,UAAU,GAAG,KAAKN,IAAL,CAAUE,KAA7B;AAEA,gBAAMK,YAAY,GAAGD,UAAU,CAACC,YAAX,CAAwBC,GAAxB,CAA6B,UAAAC,CAAC,EAAI;AACrD,qBAAO;AACLC,sBAAM,EAAEJ,UAAU,CAACJ,KADd;AAELS,sBAAM,EAAEC,MAAM,CAACH,CAAC,CAACI,QAAH,CAFT;AAGLX,qBAAK,EAAEO,CAAC,CAACP;AAHJ,eAAP;AAKD,aANoB,CAArB;AAOAI,sBAAU,CAACC,YAAX,GAA0BA,YAA1B;AACA,gBAAMO,IAAI,GAAG;AACXjB,gBAAE,EAAE,IAAIkB,IAAJ,GAAWC,OAAX,EADO;AAEXd,mBAAK,EAAEI,UAAU,CAACJ,KAFP;AAGXK,0BAAY,EAAZA,YAHW;AAIX,yBAAS;AAJE,aAAb;;AAMA,gBAAI,CAAC,KAAKU,MAAV,EAAkB;AAChB,mBAAK3B,gBAAL,CAAsB4B,IAAtB,CAA2BJ,IAA3B;AACD,aAFD,MAEO;AACL,mBAAKxB,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBkB,GAAtB,CAA2B,UAAAC,CAAC,EAAI;AACtD,oBAAIA,CAAC,CAACZ,EAAF,KAAS,KAAI,CAACoB,MAAlB,EAA0B;AACxB,yBAAOH,IAAP;AACD;;AACD,uBAAOL,CAAP;AACD,eALuB,CAAxB;AAMD;;AAGD,iBAAKT,IAAL,CAAUmB,KAAV;AACA,iBAAK5B,eAAL,GAAuB,KAAvB;AACA,iBAAK6B,aAAL;AACAC,sBAAU,CAAE,UAAAZ,CAAC,EAAI;AACf,mBAAI,CAAClB,eAAL,GAAuB,IAAvB;AACD,aAFS,EAEP,GAFO,CAAV;AAGD;;;qCAEUM,E,EAAIK,K,EAAK;AAClB,iBAAKZ,gBAAL,CAAsBkB,GAAtB,CAA2B,UAAAC,CAAC,EAAI;AAC9B,kBAAIZ,EAAE,KAAKY,CAAC,CAACZ,EAAb,EAAiB;AACfY,iBAAC,WAAD,GAAY,CAACP,KAAb;AACD,eAFD,MAEO;AACLO,iBAAC,WAAD,GAAY,KAAZ;AACD;;AACD,qBAAOA,CAAP;AACD,aAPD;AAQA,iBAAKW,aAAL;AACD;;;+BAEIE,M,EAAM;AAAA;;AACT,iBAAKL,MAAL,GAAcK,MAAM,CAACzB,EAArB;AACA,iBAAKG,IAAL,CAAUL,GAAV,CAAc,OAAd,EAAuB4B,UAAvB,CAAkCD,MAAM,CAACpB,KAAzC;AACA,iBAAKX,eAAL,GAAuB,KAAvB;AACA8B,sBAAU,CAAE,UAAAZ,CAAC,EAAI;AACf,oBAAI,CAAClB,eAAL,GAAuB,IAAvB;;AACA,oBAAI,CAACiC,yBAAL,CAA+BF,MAAM,CAACf,YAAtC;AACD,aAHS,CAAV;AAID;;;uCAES;AAAA;;AACR,iBAAKU,MAAL,GAAc,IAAd;AACA,iBAAKjB,IAAL,CAAUmB,KAAV;AACA,iBAAK5B,eAAL,GAAuB,KAAvB;AACA8B,sBAAU,CAAE,UAAAZ,CAAC,EAAI;AACf,oBAAI,CAAClB,eAAL,GAAuB,IAAvB;AACD,aAFS,CAAV;AAGD;;;oDAEiCgB,Y,EAAmB;AAAA;;AACnD,iBAAKP,IAAL,CAAUyB,aAAV,CAAwB,cAAxB;AACA,iBAAKzB,IAAL,CAAU0B,UAAV,CAAqB,cAArB,EAAqC,KAAKtC,WAAL,CAAiBuC,KAAjB,CAAuB,EAAvB,EAA2B,0DAAWxB,QAAtC,CAArC;AAEAI,wBAAY,CAACqB,OAAb,CAAsB,UAAAnB,CAAC,EAAI;AACzB,kBAAMR,KAAK,GAAG,MAAI,CAACb,WAAL,CAAiBa,KAAjB,CAAuB;AACnCY,wBAAQ,EAAE,CAACJ,CAAC,CAACE,MAAF,CAASkB,QAAT,EAAD,EAAsB,0DAAW1B,QAAjC,CADyB;AAEnCD,qBAAK,EAAE,CAACO,CAAC,CAACP,KAAH,EAAU,0DAAWC,QAArB;AAF4B,eAAvB,CAAd;;AAIC,oBAAI,CAACH,IAAL,CAAUL,GAAV,CAAc,cAAd,EAA4CuB,IAA5C,CAAiDjB,KAAjD;AACF,aAND;AAOD;;;kCAEMJ,E,EAAE;AACP,gBAAMiC,IAAI,GAAGC,OAAO,CAAC,eAAD,CAApB;;AACA,gBAAI,CAACD,IAAL,EAAW;AACT;AACD;;AAED,iBAAKxC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsB0C,MAAtB,CAA8B,UAAAvB,CAAC;AAAA,qBAAIA,CAAC,CAACZ,EAAF,KAASA,EAAb;AAAA,aAA/B,CAAxB;AACA,iBAAKuB,aAAL;AACD;;;0CAEoB;AACnB,gBAAMxB,MAAM,GAAG,KAAKC,EAAL,CAAQC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4BC,WAA5B,EAAf;;AACA,gBAAMkC,MAAM,uBACT,eAAerC,MADN,EACe,KAAKN,gBADpB,CAAZ;;AAGA,gBAAM4C,SAAS,GAAG,KAAK7C,SAAL,CAAeM,GAAf,CAAmB,kBAAnB,CAAlB;;AACA,gBAAI,CAACuC,SAAL,EAAe;AACb,mBAAK7C,SAAL,CAAe8C,IAAf,CAAoB,kBAApB,EAAwC,MAAF,OAAE,CAAF,EAAE,EACnCF,MADmC,CAAxC;AAGD,aAJD,MAIO;AACL,mBAAK5C,SAAL,CAAe8C,IAAf,CAAoB,kBAApB,EAAwC,MAAF,OAAE,CAAF,kBACjCD,SADiC,CAAE,EAEnCD,MAFmC,CAAxC;AAID;AACF;;;;;;;yBAlJU9C,oC,EAAoC,2H,EAAA,4J;AAAA,O;;;cAApCA,oC;AAAoC,0D;AAAA;AAAA;AAAA,S;AAAA,iB;AAAA,e;AAAA,+wB;AAAA;AAAA;ACVjD;;AACI;;AACI;;AAA2B;;AAAO;;AACpC;;AACN;;AACA;;AACI;;AACE;;AAAO;;AAAY;;AACnB;;AACF;;AACA;;AACI;;AAAO;;AAAO;;AACd;;AACJ;;AACA;;AAAsD;AAAA,qBAAS,IAAAiD,GAAA,EAAT;AAAc,aAAd;;AAAgB;;AAA6B;;AACnG;;AACJ;;AAEA;;AACI;;AACI;;AACI;;AACI;;AAAgB;;AAAW;;AAC3B;;AAAgB;;AAAK;;AACrB;;AAAgB;;AAAO;;AACvB;;AACJ;;AACJ;;AACA;;AACI;;AAkBJ;;AACJ;;AACJ;;;;AA5C8C;;AAAA;;AAGpB;;AAAA;;AAMgD;;AAAA;;AAC9D;;AAAA;;AAcI;;AAAA;;;;;;;;;;wEDnBHjD,oC,EAAoC;gBALhD,uDAKgD;iBALtC;AACTkD,oBAAQ,EAAE,mCADD;AAETC,uBAAW,EAAE,gDAFJ;AAGTC,qBAAS,EAAE,CAAC,gDAAD;AAHF,W;AAKsC,U;;;;;;;AAMtC1C,YAAE,EAAE,CAAF;kBAAV;AAAU,WAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEmCH;;AACI;;AACI;;AACJ;;AACA;;AACI;;;;AACJ;;AACA;;AACI;;AACJ;;AACA;;AAEI;;AAAG;AAAA;;AAAA;;AAAA;;AAAA,sCAAqB,MAArB,EAA6B,YAA7B;AAA2B,WAA3B;;AAAyC;;AAAI;;AAAK;;AACrD;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4B;;AAAM;;AACzC;;AACJ;;;;;;AAbQ;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;;;;;;;AA+BZ;;AACI;;AACI;AAAA;;AAAA;;AAAA;AAAA;;AADJ;;AAGA;;AAAsD;;AAAkB;;AAC5E;;;;;;AAFsE;;AAAA;;;;;;AAWtD;;AAAiE;;AAAe;;;;;;AAArC;;AAAsB;;AAAA;;;;;;AADrE;;AACI;;AACJ;;;;;;;;AADY;;AAAA;;;;;;;;;;;;AARxB;;AACI;;AACI;;AAAO;;AAAW;;AAClB;;AAGI;;AACA;;AAIJ;;AACJ;;AACJ;;;;;;AATY;;AAAA;;AAGc;;AAAA;;;;;;AA2BlB;;;;;;AAAoB,qFAAiB,MAAjB,EAAiB,YAAjB;;;;;;AApB5B;;AACI;;AACI;;AAAO;;AAAI;;AACX;;AAGJ;;AACA;;AACI;;AAAO;;AAAM;;AACb;;AAGI;;AACA;;AAAuB;;AAAM;;AAC7B;;AAAwB;;AAAO;;AAC/B;;AAAwB;;AAAO;;AACnC;;AACJ;;AACA;;AACI;;AAAO;;AAAO;;AACd;;AACJ;;AACJ;;;;;;AAjBY;;AAAA;;AAKA;;AAAA;;AAUkC;;AAAA;;;;;;AAOlD;;;;;;AAAmC;;;;;;;;UCpH1B2C,wB;AAgBb,0CACYpD,WADZ,EAEYC,SAFZ,EAGYoD,GAHZ,EAIYC,MAJZ,EAKYC,IALZ,EAK+B;AAAA;;AAJnB,eAAAvD,WAAA,GAAAA,WAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAoD,GAAA,GAAAA,GAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,IAAA,GAAAA,IAAA;AAlBH,eAAAC,qBAAA,GAA+B,EAA/B;AAMA,eAAAC,SAAA,GAAY,KAAZ;AACA,eAAAC,mBAAA,GAAsB,KAAtB;AACA,eAAAC,aAAA,GAAgB,EAAhB,CAUsB,CAR7B;;AACA,eAAAC,SAAA,GAAY,SAAZ;AAQK;;;;qCAEG;AAAA;;AACN,iBAAKC,WAAL,GAAmB,KAAK5D,SAAL,CAAeM,GAAf,CAAmB,aAAnB,CAAnB;AACA,iBAAKH,SAAL;AACA6B,sBAAU,CAAE,UAAAZ,CAAC,EAAI;AACf,oBAAI,CAACe,yBAAL,CAA+B,MAAI,CAAC0B,eAApC,EAAqD,MAAI,CAACD,WAAL,CAAiB1C,YAAtE;AACD,aAFS,EAEP,CAFO,CAAV;;AAIA,gBAAI,yEAAYd,UAAhB,EAA2B;AACzB,kBAAMC,MAAM,GAAG,KAAKL,SAAL,CAAeM,GAAf,CAAmB,uBAAnB,CAAf;AACA,mBAAKwD,gBAAL;;AACA,kBAAI,CAACzD,MAAL,EAAY;AACV;AACD;;AAED,kBAAM0D,KAAK,GAAG,KAAKH,WAAL,CAAiBI,QAAjB,CAA0BvD,OAA1B,CAAkC,KAAlC,EAAyC,GAAzC,EAA8CC,WAA9C,EAAd;AACA,mBAAK6C,qBAAL,GAA6BlD,MAAM,oBAAa0D,KAAb,EAAN,IAA+B,EAA5D;AACA;AACD;;AAED,iBAAKR,qBAAL,GAA6B,EAA7B;AACA,iBAAKU,uBAAL,CAA6B,KAAKL,WAAL,CAAiBI,QAA9C;AACD;;;6CAEe;AAAA;;AACd,gBAAM3D,MAAM,GAAG,KAAKL,SAAL,CAAeM,GAAf,CAAmB,uBAAnB,CAAf;;AACA,gBAAI,CAACD,MAAL,EAAY;AACV;AACD;;AACD6D,kBAAM,CAAC7D,MAAP,CAAcA,MAAd,EAAsBkC,OAAtB,CAA8B,UAAC4B,KAAD,EAAgB;AAC5C,oBAAI,CAACT,aAAL,gCACK,MAAI,CAACA,aADV,sBAEKS,KAFL;AAID,aALD;AAMA,mBAAO9D,MAAP;AACD;;;uCAEYG,E,EAAE;AACb,mBAAO,KAAK+C,qBAAL,CAA2BZ,MAA3B,CAAmC,UAAAvB,CAAC;AAAA,qBAAIA,CAAC,CAACgD,MAAF,KAAa5D,EAAjB;AAAA,aAApC,EAAyD6D,MAAzD,GAAkE,CAAzE;AACD;;;oDAEsB;AACrB,iBAAKZ,mBAAL,GAA2B,CAAC,KAAKA,mBAAjC;AACA,iBAAK9C,IAAL,CAAUmB,KAAV;AACD;;;0CAEoB;AACnB,gBAAMiC,KAAK,GAAG,KAAKH,WAAL,CAAiBI,QAAjB,CAA0BvD,OAA1B,CAAkC,KAAlC,EAAyC,GAAzC,EAA8CC,WAA9C,EAAd;;AACA,gBAAMkC,MAAM,uBACT,cAAcmB,KADL,EACa,KAAKR,qBADlB,CAAZ;;AAGA,gBAAMV,SAAS,GAAG,KAAK7C,SAAL,CAAeM,GAAf,CAAmB,uBAAnB,CAAlB;;AACA,gBAAI,CAACuC,SAAL,EAAe;AACb,mBAAK7C,SAAL,CAAe8C,IAAf,CAAoB,uBAApB,EAA6C,MAAF,OAAE,CAAF,EAAE,EACxCF,MADwC,CAA7C;AAGD,aAJD,MAIO;AACL,mBAAK5C,SAAL,CAAe8C,IAAf,CAAoB,uBAApB,EAA6C,MAAF,OAAE,CAAF,kBACtCD,SADsC,CAAE,EAExCD,MAFwC,CAA7C;AAID;AACF;;;kDAEuBpC,E,EAAU;AAAA;;AAChC,iBAAK4C,GAAL,CAASkB,IAAT,CAAc,sDAAd,EAAsE;AACpEN,sBAAQ,EAAExD;AAD0D,aAAtE,EAEG+D,SAFH,CAEc,UAAAnD,CAAC,EAAI;AACjB,oBAAI,CAACmC,qBAAL,GAA6BnC,CAAC,CAACoD,QAA/B;AACAC,qBAAO,CAACC,GAAR,CAAYtD,CAAC,CAACoD,QAAd;AACD,aALD;AAMD;;;sCAEgB;AACf,iBAAK7D,IAAL,GAAY,KAAKZ,WAAL,CAAiBa,KAAjB,CAAuB;AACjCJ,gBAAE,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWM,QAAZ,CAAL,CAD6B;AAEjC6D,kBAAI,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW7D,QAAZ,CAAL,CAF2B;AAGjC8D,sBAAQ,EAAE,CAAC,EAAD,EAAK,EAAL;AAHuB,aAAvB,CAAZ;AAKA,iBAAKf,eAAL,GAAuB,KAAK9D,WAAL,CAAiBa,KAAjB,CAAuB;AAC5CoD,sBAAQ,EAAE,CAAC,KAAKJ,WAAL,CAAiBI,QAAlB,EAA4B,CAAC,0DAAWlD,QAAZ,CAA5B;AADkC,aAAvB,CAAvB;AAGD;;;sCAGW6D,I,EAAcE,G,EAAS;AAAA;;AACjC,gBAAIF,IAAI,KAAK,KAAb,EAAoB;AAClB,mBAAKG,UAAL,GAAkB,cAAlB;AACA,mBAAKC,cAAL,GAAsB,MAAtB;AACA,mBAAKnD,MAAL,GAAc,IAAd;AACD,aAJD,MAIO;AACL,mBAAKA,MAAL,GAAciD,GAAG,CAACT,MAAlB;AACA,mBAAKW,cAAL,GAAsB,QAAtB;AACA,mBAAKD,UAAL,kBAA0BD,GAAG,CAACT,MAA9B;AACA,mBAAKzD,IAAL,CAAUL,GAAV,CAAc,IAAd,EAAoB4B,UAApB,CAA+B2C,GAAG,CAACT,MAAnC;AACA,mBAAKzD,IAAL,CAAUL,GAAV,CAAc,MAAd,EAAsB4B,UAAtB,CAAiC2C,GAAG,CAACG,QAArC;AACAhD,wBAAU,CAAE,UAAAZ,CAAC,EAAI;AACf,sBAAI,CAACe,yBAAL,CAA+B,MAAI,CAACxB,IAApC,EAA0CkE,GAAG,CAAC3D,YAA9C;AACD,eAFS,EAEP,CAFO,CAAV;AAGD;;AAED,iBAAKsC,SAAL,GAAiB,IAAjB;AACD;;;oDAEiC7C,I,EAAMO,Y,EAAmB;AAAA;;AACzDA,wBAAY,CAACqB,OAAb,CAAsB,UAAAnB,CAAC,EAAI;AACzB,kBAAMR,KAAK,GAAG,MAAI,CAACb,WAAL,CAAiBa,KAAjB,CAAuB;AACnCY,wBAAQ,EAAE,CAACJ,CAAC,CAACE,MAAF,CAASkB,QAAT,EAAD,EAAsB,0DAAW1B,QAAjC,CADyB;AAEnCD,qBAAK,EAAE,CAACO,CAAC,CAACP,KAAH,EAAU,0DAAWC,QAArB;AAF4B,eAAvB,CAAd;;AAICH,kBAAI,CAACL,GAAL,CAAS,cAAT,EAAuCuB,IAAvC,CAA4CjB,KAA5C;AACF,aAND;AAOD;;;uCAES;AACR,iBAAKD,IAAL,CAAUmB,KAAV;AACA,iBAAK0B,SAAL,GAAiB,KAAjB;AACA,iBAAKC,mBAAL,GAA2B,KAA3B;AACD;;;uCAGS;AAAA;;AACR,iBAAK9C,IAAL,CAAUsE,gBAAV;;AAEA,gBAAI,KAAKxB,mBAAT,EAA8B;AAC5B,kBAAMlD,MAAM,GAAG,KAAKI,IAAL,CAAUE,KAAV,CAAgB+D,QAA/B;;AACA,kBAAIrE,MAAM,CAAC8D,MAAP,KAAkB,CAAtB,EAAwB;AACtB;AACD;;AACD,kBAAMa,SAAS,GAAG,KAAKxB,aAAL,CAAmBf,MAAnB,CAA2B,UAAAvB,CAAC;AAAA,uBAAIA,CAAC,CAACgD,MAAF,KAAa7D,MAAjB;AAAA,eAA5B,EAAqD,CAArD,CAAlB;AACA,mBAAKgD,qBAAL,CAA2B1B,IAA3B,CAAgCqD,SAAhC;AACA,mBAAKnD,aAAL;AACA,mBAAKpB,IAAL,CAAUmB,KAAV;AACA,mBAAK0B,SAAL,GAAiB,KAAjB;AACA,mBAAKC,mBAAL,GAA2B,KAA3B;AACA;AACD;;AAED,gBAAI,KAAK9C,IAAL,CAAUI,OAAd,EAAuB;AACrBC,mBAAK,CAAC,yBAAD,CAAL;AACA;AACD;;AApBO,mCAsBgD,KAAKL,IAAL,CAAUE,KAtB1D;AAAA,gBAsBDL,EAtBC,oBAsBDA,EAtBC;AAAA,gBAsBGmE,IAtBH,oBAsBGA,IAtBH;AAAA,gBAsBSzD,YAtBT,oBAsBSA,YAtBT;AAwBR,gBAAMO,IAAI,GAAG;AACX2C,oBAAM,EAAE5D,EADG;AAEXwE,sBAAQ,EAAEL,IAFC;AAGXQ,uBAAS,EAAE3E,EAHA;AAIXwD,sBAAQ,EAAE,KAAKJ,WAAL,CAAiBI,QAJhB;AAKX9C,0BAAY,EAAEA,YAAY,CAACC,GAAb,CAAkB,UAAAC,CAAC,EAAI;AACnC,uBAAO;AACLC,wBAAM,EAAEb,EADH;AAELc,wBAAM,EAAEC,MAAM,CAACH,CAAC,CAACI,QAAH,CAFT;AAGLX,uBAAK,EAAEO,CAAC,CAACP;AAHJ,iBAAP;AAKD,eANa;AALH,aAAb;;AAcA,gBAAI,CAAC,KAAKe,MAAV,EAAkB;AAChB,kBAAI,yEAAYxB,UAAhB,EAA4B;AAC1B,qBAAKmD,qBAAL,CAA2B1B,IAA3B,CAAgCJ,IAAhC;AACA,qBAAKM,aAAL;AACA,qBAAKH,MAAL,GAAcpB,EAAd;AACA,qBAAKsE,UAAL,GAAkB,UAAUtE,EAA5B;AACA,qBAAKuE,cAAL,GAAsB,QAAtB,CAL0B,CAM1B;;AACA;AACD;;AAED,mBAAK3B,GAAL,CAASgC,MAAT,CAAgB,mCAAhB,EAAqD3D,IAArD,EAA2D8C,SAA3D,CAAsE,UAAAnD,CAAC,EAAI;AACzE,uBAAI,CAACoC,SAAL,GAAiB,KAAjB;;AACA,uBAAI,CAAC7C,IAAL,CAAUmB,KAAV;AACD,eAHD;AAID,aAfD,MAeO;AACL,mBAAKuD,eAAL,CAAqB5D,IAArB,EAA2B,KAAKG,MAAhC;AACD;AACF;;;0CAEeH,I,EAAM6D,K,EAAK;AAAA;;AAEzB,gBAAI,yEAAYlF,UAAhB,EAA4B;AAE1B;AACA,kBAAIkF,KAAK,KAAK7D,IAAI,CAAC2C,MAAnB,EAA2B;AACvB,oBAAImB,UAAU,GAAG,KAAKvF,SAAL,CAAeM,GAAf,CAAmB,kBAAnB,CAAjB;;AACA,oBAAI4D,MAAM,CAACsB,IAAP,CAAYD,UAAZ,EAAwBlB,MAAxB,GAAiC,CAArC,EAAwC;AACtC,sBAAM9D,MAAM,GAAG+E,KAAK,CAAC7E,OAAN,CAAc,KAAd,EAAqB,GAArB,EAA0BC,WAA1B,EAAf;AACA,sBAAM+E,eAAe,GAAGF,UAAU,CAAC,eAAehF,MAAhB,CAAlC;AACA,yBAAOgF,UAAU,CAAC,eAAehF,MAAhB,CAAjB;AACA,sBAAMmF,SAAS,GAAGjE,IAAI,CAAC2C,MAAL,CAAY3D,OAAZ,CAAoB,KAApB,EAA2B,GAA3B,EAAgCC,WAAhC,EAAlB;AACA6E,4BAAU,GAAG,MAAH,OAAG,CAAH,kBACLA,UADK,CAAG,sBAEV,eAAeG,SAFL,EAEkBD,eAFlB,EAAb;AAIA,uBAAKzF,SAAL,CAAe8C,IAAf,CAAoB,kBAApB,EAAwCyC,UAAxC;AACD;AACJ;;AAGD,mBAAKhC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BZ,MAA3B,CAAmC,UAAAvB,CAAC;AAAA,uBAAIA,CAAC,CAACgD,MAAF,KAAakB,KAAjB;AAAA,eAApC,CAA7B;AACA,mBAAK/B,qBAAL,CAA2B1B,IAA3B,CAAgCJ,IAAhC;AACA,mBAAKM,aAAL;AACA,mBAAKpB,IAAL,CAAUmB,KAAV;AACA,mBAAK0B,SAAL,GAAiB,KAAjB;AACA;AACD;;AAED,iBAAKJ,GAAL,CAASgC,MAAT,CAAgB,mCAAhB,EAAqD,MAAF,OAAE,CAAF,kBAC9C3D,IAD8C,CAAE,EAC5C;AACPkE,uBAAS,EAAEL;AADJ,aAD4C,CAArD,EAGGf,SAHH,CAGc,UAAAnD,CAAC,EAAI;AACjB,qBAAI,CAACoC,SAAL,GAAiB,KAAjB;;AACA,qBAAI,CAAC7C,IAAL,CAAUmB,KAAV;AACD,aAND;AAOD;;;kCAEY+C,G,EAAQ;;;;;;;AACbpC,0B,GAAOC,OAAO,CAAC,eAAD,C;;0BACfD,I;;;;;;;;2BAID,yEAAYrC,U;;;;;AACd,2BAAKmD,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BZ,MAA3B,CAAmC,UAAAvB,CAAC;AAAA,+BAAIA,CAAC,CAACgD,MAAF,KAAaS,GAAG,CAACT,MAArB;AAAA,uBAApC,CAA7B;AACA,2BAAKrC,aAAL;;;;AAGIN,0B,GAAO;AACXmE,uCAAe,EAAEf,GAAG,CAACT,MADV;AAEXJ,gCAAQ,EAAE,KAAKJ,WAAL,CAAiBI;AAFhB,uB;;AAIb,6BAAM,KAAKZ,GAAL,CAASgC,MAAT,CAAgB,yDAAhB,EAA2E3D,IAA3E,EAAiFoE,SAAjF,EAAN;;;AACA,2BAAKtC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BZ,MAA3B,CAAmC,UAAAvB,CAAC;AAAA,+BAAIyD,GAAG,CAACT,MAAJ,KAAehD,CAAC,CAACgD,MAArB;AAAA,uBAApC,CAA7B;;;;;;;;;AACD;;;mCAGK;AAAA;;AACJ,gBAAM0B,SAAS,GAAG,KAAKjC,eAAL,CAAqBhD,KAAvC;AACA,gBAAMK,YAAY,GAAG4E,SAAS,CAAC5E,YAAV,CAAuBC,GAAvB,CAA4B,UAAAC,CAAC,EAAI;AACpD,qBAAO;AACLC,sBAAM,EAAEyE,SAAS,CAAC9B,QADb;AAEL1C,sBAAM,EAAEC,MAAM,CAACH,CAAC,CAACI,QAAH,CAFT;AAGLX,qBAAK,EAAEO,CAAC,CAACP;AAHJ,eAAP;AAKD,aANoB,CAArB,CAFI,CASJ;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,gBAAI,KAAK+C,WAAL,CAAiBI,QAAjB,KAA8B8B,SAAS,CAAC9B,QAA5C,EAAsD;AACpD,kBAAIN,aAAa,GAAG,KAAK1D,SAAL,CAAeM,GAAf,CAAmB,uBAAnB,CAApB;;AACA,kBAAI4D,MAAM,CAACsB,IAAP,CAAY9B,aAAZ,EAA2BW,MAA3B,GAAoC,CAAxC,EAA2C;AACzC,oBAAMN,KAAK,GAAG,KAAKH,WAAL,CAAiBI,QAAjB,CAA0BvD,OAA1B,CAAkC,KAAlC,EAAyC,GAAzC,EAA8CC,WAA9C,EAAd;AACA,oBAAMqF,WAAW,GAAGrC,aAAa,CAAC,cAAcK,KAAf,CAAjC;AACA,uBAAOL,aAAa,CAAC,cAAcK,KAAf,CAApB;AACA,oBAAMiC,QAAQ,GAAGF,SAAS,CAAC9B,QAAV,CAAmBvD,OAAnB,CAA2B,KAA3B,EAAkC,GAAlC,EAAuCC,WAAvC,EAAjB;AACAgD,6BAAa,GAAG,MAAH,OAAG,CAAH,kBACRA,aADQ,CAAG,sBAEb,cAAcsC,QAFD,EAEaD,WAFb,EAAhB;AAIA,qBAAK/F,SAAL,CAAe8C,IAAf,CAAoB,uBAApB,EAA6CY,aAA7C;AACD;AACF;;AAED,iBAAK1D,SAAL,CAAe8C,IAAf,CAAoB,aAApB,EAAoC;AAClCkB,sBAAQ,EAAE8B,SAAS,CAAC9B,QADc;AAElCiC,+BAAiB,EAAEH,SAAS,CAAC9B,QAFK;AAGlC9C,0BAAY,EAAZA;AAHkC,aAApC;AAMA,gBAAMgF,IAAI,GAAG,KAAKlG,SAAL,CAAeM,GAAf,CAAmB,cAAnB,EAAmCa,GAAnC,CAAwC,UAAAC,CAAC,EAAI;AACxD,kBAAIA,CAAC,CAAC4C,QAAF,KAAe,OAAI,CAACJ,WAAL,CAAiBI,QAApC,EAA8C;AAC5C5C,iBAAC,CAAC4C,QAAF,GAAa8B,SAAS,CAAC9B,QAAvB;AACA5C,iBAAC,CAAC6E,iBAAF,GAAsBH,SAAS,CAAC9B,QAAhC;AACA5C,iBAAC,CAACF,YAAF,GAAiBA,YAAjB;AACD;;AACD,qBAAOE,CAAP;AACD,aAPY,CAAb;AAQA,iBAAKpB,SAAL,CAAe8C,IAAf,CAAoB,cAApB,EAAqCoD,IAArC;AAEA,iBAAK5C,IAAL,CAAU6C,KAAV;AACAnE,sBAAU,CAAE,UAAAZ,CAAC,EAAI;AACfJ,mBAAK,CAAC,SAAD,CAAL;;AACA,qBAAI,CAACsC,IAAL,CAAU8C,GAAV;AACD,aAHS,EAGP,GAHO,CAAV;AAKD;;;mCAGK;AACJ,iBAAK/C,MAAL,CAAYgD,QAAZ,CAAqB,CAAC,aAAD,CAArB;AACD;;;;;;;yBAhUUlD,wB,EAAwB,2H,EAAA,4J,EAAA,+I,EAAA,uH,EAAA,sH;AAAA,O;;;cAAxBA,wB;AAAwB,6C;AAAA,iB;AAAA,gB;AAAA,qiD;AAAA;AAAA;ADrBrC;;AACI;;AACI;;AACI;;AAAmC;;AAAW;;AAClD;;AACA;;AACI;;AACJ;;AACJ;;AACJ;;AAGA;;AACI;;AACI;;AACI;;AAEJ;;AACA;;AACJ;;AACA;;AACI;;AACI;;AACA;;AAEJ;;AAEJ;;AACA;;AACI;;AAAuC;AAAA,qBAAS,IAAAmD,MAAA,EAAT;AAAiB,aAAjB;;AAAmB;;AAAM;;AAChE;;AAAyC;AAAA,qBAAS,IAAAC,MAAA,EAAT;AAAiB,aAAjB;;AAAmB;;AAAM;;AACtE;;AACJ;;AAEA;;AAEI;;AACI;;AAAO;;AAAU;;AACjB;;AAAqD;AAAA,qBAAS,IAAAC,WAAA,CAAY,KAAZ,CAAT;AAA2B,aAA3B;;AAA6B;;AAAiB;;AACvG;;AAEA;;AACI;;AACI;;AACI;;AAAgB;;AAAE;;AAClB;;AAAgB;;AAAK;;AACrB;;AAAgB;;AAAI;;AACpB;;AACJ;;AACJ;;AACA;;AACI;;AAgBJ;;AACJ;;AACJ;;AAGA;;AAMI;AAAA,qBAAS,IAAAC,UAAA,EAAT;AAAqB,aAArB,EAAsB,QAAtB,EAAsB;AAAA,qBACZ,IAAAC,UAAA,EADY;AACA,aADtB;;AAWA;;AACI;;AAMA;;AAcA;;AAwBJ;;AACA;;AAEA;;AAGJ;;;;AAzIe;;AAAA;;AAGH;;AAAA;;AAMN;;AAAA;;AAW0B;;AAAA,6FAAuB,MAAvB,EAAuB,mBAAvB;;AA4BhB;;AAAA;;AAuBZ;;AAAA,4FAAkB,SAAlB,EAAkB,kBAAlB,EAAkB,UAAlB,EAAkB,QAAlB,EAAkB,OAAlB,EAAkB,cAAlB;;AAeM;;AAAA;;AACG;;AAAA;;AAMS;;AAAA;;AAcA;;AAAA;;AA2B+B;;AAAA;;;;;;;;;;wECpHxCvD,wB,EAAwB;gBALpC,uDAKoC;iBAL1B;AACTH,oBAAQ,EAAE,sBADD;AAETC,uBAAW,EAAE,mCAFJ;AAGTC,qBAAS,EAAE,CAAC,mCAAD;AAHF,W;AAK0B,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBrC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAUA,UAAMyD,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,EAKrB;AACED,YAAI,EAAE,KADR;AAEEC,iBAAS,EAAE;AAFb,OALqB,CAAvB;;UA0BaC,iB;;;;;cAAAA;;;;2BAAAA,iB;AAAiB,S;AAAA,kBARnB,CACP,4DADO,EAEP,0DAFO,EAGP,kEAHO,EAIP,kEAJO,EAKP,6DAAaC,QAAb,CAAsBJ,MAAtB,CALO,CAQmB;;;;4HAAjBG,iB,EAAiB;AAAA,yBAb1B,uFAa0B,EAZ1B,qGAY0B,EAX1B,kEAW0B,EAV1B,2IAU0B;AAVU,oBAGpC,4DAHoC,EAIpC,0DAJoC,EAKpC,kEALoC,EAMpC,kEANoC,EAMxB,4DANwB;AAUV,S;AAJd,O;;;;;wEAIHA,iB,EAAiB;gBAf7B,sDAe6B;iBAfpB;AACRE,wBAAY,EAAE,CACZ,uFADY,EAEZ,qGAFY,EAGZ,kEAHY,EAIZ,2IAJY,CADN;AAORC,mBAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,kEAHO,EAIP,kEAJO,EAKP,6DAAaF,QAAb,CAAsBJ,MAAtB,CALO;AAPD,W;AAeoB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACflB;;AACI;;AAAI;;AAAiB;;AACrB;;AAAI;;;;AAAiC;;AACrC;;AAGI;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;AAAI;;AAC3B;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAsB;;AAAM;;AACnC;;AACJ;;;;;;AARQ;;AAAA;;AACA;;AAAA;;;;;;AA+BR;;;;;;AAAoB,2FAAuB,MAAvB,EAAuB,WAAvB;;;;;;;;;;;;AAV5B;;AACI;;AACI;;AAAO;;AAAS;;AAChB;;AAGJ;;AACA;;AACI;;AAAO;;AAAa;;AAEpB;;AACJ;;AACJ;;;;;;AAZM;;AAKI;;AAAA;;AAKwD;;AAAA;;;;UCpCzDO,oB;AA+BX,sCACUnH,WADV,EAEUqD,GAFV,EAGUpD,SAHV,EAIUqD,MAJV,EAIwB;AAAA;;AAHd,eAAAtD,WAAA,GAAAA,WAAA;AACA,eAAAqD,GAAA,GAAAA,GAAA;AACA,eAAApD,SAAA,GAAAA,SAAA;AACA,eAAAqD,MAAA,GAAAA,MAAA;AAjCH,eAAA7B,QAAA,GAAW,yEAAYA,QAAvB;AAEA,eAAAuD,cAAA,GAAiB,MAAjB;AAGA,eAAAvB,SAAA,GAAY,KAAZ;AAGP,eAAA2D,YAAA,GAAe,CACb;AACEnD,oBAAQ,EAAE,KADZ;AAEEiC,6BAAiB,EAAE,KAFrB;AAGE/E,wBAAY,EAAE,CACZ;AACEV,gBAAE,EAAE,CADN;AAEEa,oBAAM,EAAE,KAFV;AAGEC,oBAAM,EAAE,CAHV;AAIET,mBAAK,EAAE;AAJT,aADY,EAOZ;AACEL,gBAAE,EAAE,CADN;AAEEa,oBAAM,EAAE,KAFV;AAGEC,oBAAM,EAAE,CAHV;AAIET,mBAAK,EAAE;AAJT,aAPY;AAHhB,WADa,CAAf;AA0BK;;;;qCAEG;AACN,iBAAKV,SAAL;;AAEA,gBAAI,yEAAYC,UAAhB,EAA2B;AAEzB,kBAAI,CAAC,KAAKJ,SAAL,CAAeM,GAAf,CAAmB,cAAnB,CAAL,EAAwC;AACtC,qBAAKN,SAAL,CAAe8C,IAAf,CAAoB,cAApB,EAAoC,KAAKqE,YAAzC;AACD,eAFD,MAEO;AACL,qBAAKA,YAAL,GAAoB,KAAKnH,SAAL,CAAeM,GAAf,CAAmB,cAAnB,CAApB;AACD;;AAED;AACD;;AAED,iBAAK8G,QAAL;AACD;;;qCAEqB;;;;;;;AACpB,2BAAKD,YAAL,GAAoB,EAApB;;AACc,6BAAM,KAAK/D,GAAL,CAASkB,IAAT,CAAc,+BAAd,EAA+CuB,SAA/C,EAAN;;;AAARvB,0B;AACN,2BAAK6C,YAAL,GAAoB7C,IAAI,CAAC+C,eAAzB;;;;;;;;;AACD;;;sCAEgB;AACf,iBAAK1G,IAAL,GAAY,KAAKZ,WAAL,CAAiBa,KAAjB,CAAuB;AACjCoD,sBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWlD,QAAZ,CAAL;AADuB,aAAvB,CAAZ;AAGD;;;sCAEW6D,I,EAAcE,G,EAAkB;AAAA;;AAC1C,gBAAIF,IAAI,KAAK,KAAb,EAAoB;AAClB,mBAAKG,UAAL,GAAkB,iBAAlB;AACA,mBAAKC,cAAL,GAAsB,MAAtB;AACA,mBAAKnD,MAAL,GAAc,IAAd;AACD,aAJD,MAIO;AACL,mBAAKmD,cAAL,GAAsB,QAAtB;AACA,mBAAKD,UAAL,kBAA0BD,GAAG,CAACb,QAA9B;AACA,mBAAKpC,MAAL,GAAciD,GAAG,CAACb,QAAlB;AACA,mBAAKrD,IAAL,CAAUL,GAAV,CAAc,UAAd,EAA0B4B,UAA1B,CAAqC2C,GAAG,CAACb,QAAzC;AACAhC,wBAAU,CAAE,UAAAZ,CAAC,EAAI;AACf,uBAAI,CAACe,yBAAL,CAA+B0C,GAAG,CAAC3D,YAAnC;AACD,eAFS,EAEP,CAFO,CAAV;AAGD;;AAED,iBAAKsC,SAAL,GAAiB,IAAjB;AACD;;;oDAEiCtC,Y,EAAmB;AAAA;;AACnDA,wBAAY,CAACqB,OAAb,CAAsB,UAAAnB,CAAC,EAAI;AACzB,kBAAMR,KAAK,GAAG,OAAI,CAACb,WAAL,CAAiBa,KAAjB,CAAuB;AACnCY,wBAAQ,EAAE,CAACJ,CAAC,CAACE,MAAF,CAASkB,QAAT,EAAD,EAAsB,0DAAW1B,QAAjC,CADyB;AAEnCD,qBAAK,EAAE,CAACO,CAAC,CAACP,KAAH,EAAU,0DAAWC,QAArB;AAF4B,eAAvB,CAAd;;AAIC,qBAAI,CAACH,IAAL,CAAUL,GAAV,CAAc,cAAd,EAA4CuB,IAA5C,CAAiDjB,KAAjD;AACF,aAND;AAOD;;;uCAES;AACR,iBAAKD,IAAL,CAAUmB,KAAV;AACA,iBAAK0B,SAAL,GAAiB,KAAjB;AACD;;;uCAGe;;;;;;;;AACd,2BAAK7C,IAAL,CAAUsE,gBAAV;0CAC+C,KAAKtE,IAAL,CAAUE,K,EAAlDmD,Q,qBAAAA,Q,EAAU9C,Y,qBAAAA,Y;;2BACb,KAAKP,IAAL,CAAUI,O;;;;;AACZC,2BAAK,CAAC,yBAAD,CAAL;;;;0BAIG,KAAKsG,YAAL,CAAkBpG,YAAlB,C;;;;;AACHF,2BAAK,CAAC,iCAAD,CAAL;;;;AAIF,2BAAKwC,SAAL,GAAiB,KAAjB;AACM+D,kC,GAAerG,YAAY,CAACC,GAAb,CAAkB,UAAAC,CAAC,EAAI;AAC1C,+BAAO;AACLC,gCAAM,EAAE2C,QADH;AAEL1C,gCAAM,EAAEC,MAAM,CAACH,CAAC,CAACI,QAAH,CAFT;AAGLX,+BAAK,EAAEO,CAAC,CAACP;AAHJ,yBAAP;AAKD,uBANoB,C;AAQfY,0B,GAAO;AACXwE,yCAAiB,EAAEjC,QADR;AAEXA,gCAAQ,EAARA,QAFW;AAGX9C,oCAAY,EAAEqG;AAHH,uB;;2BAMT,KAAKzC,UAAL,CAAgB0C,QAAhB,CAAyB,MAAzB,C;;;;;;;;;AAIJ,6BAAM,KAAKC,iBAAL,CAAuBhG,IAAvB,CAAN;;;;;;;;;AACD,W,CAGD;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;gDAE8BuC,Q,EAAU9C,Y,EAAY;AAAA;;AAClD,iBAAKiG,YAAL,GAAoB,KAAKA,YAAL,CAAkBhG,GAAlB,CAAuB,UAAAC,CAAC,EAAI;AAC9C,kBAAKA,CAAC,CAAC4C,QAAF,KAAe,OAAI,CAACpC,MAAzB,EAAkC;AAChCR,iBAAC,CAAC4C,QAAF,GAAaA,QAAb;AACA5C,iBAAC,CAACF,YAAF,GAAiBA,YAAjB;AACD;;AACD,qBAAOE,CAAP;AACD,aANmB,CAApB;AAOD;;;4CAEuBK,I,EAAI;;;;;;;2BACtB,yEAAYrB,U;;;;;AACd,2BAAK+G,YAAL,CAAkBtF,IAAlB,CAAuB;AACrBmC,gCAAQ,EAAEvC,IAAI,CAACuC,QADM;AAErBiC,yCAAiB,EAAExE,IAAI,CAACuC,QAFH;AAGrB9C,oCAAY,EAAEO,IAAI,CAACP,YAAL,CAAkBC,GAAlB,CAAuB,UAAAC,CAAC,EAAI;AACxC,iCAAO,MAAP,OAAO,CAAP;AACEZ,8BAAE,EAAE,IAAIkB,IAAJ,GAAWC,OAAX;AADN,2BAAO,EAEFP,CAFE,CAAP;AAID,yBALa;AAHO,uBAAvB;AAUA,2BAAKW,aAAL;AACA,2BAAKpB,IAAL,CAAUmB,KAAV;;;;;AAGY,6BAAM,KAAKsB,GAAL,CAASgC,MAAT,CAAgB,+BAAhB,EAAiD3D,IAAjD,EAAuDoE,SAAvD,EAAN;;;AAAR6B,2B;AACN,2BAAK/G,IAAL,CAAUmB,KAAV;AACA,2BAAKqF,YAAL,CAAkBtF,IAAlB,CAAuB6F,KAAK,CAAC9D,WAA7B;;;;;;;;;AACD;;;uCAEY1C,Y,EAAY;AACvB,gBAAMyG,KAAK,GAAGzG,YAAY,CAACyB,MAAb,CAAqB,UAAAvB,CAAC;AAAA,qBAAIA,CAAC,CAACI,QAAF,KAAe,GAAnB;AAAA,aAAtB,EAA8C6C,MAA9C,GAAuD,CAArE;AACA,mBAAOsD,KAAP;AACD;;;kCAEY9C,G,EAAiB;;;;;;;AACtBpC,0B,GAAOC,OAAO,CAAC,eAAD,C;;0BACfD,I;;;;;;;;2BAID,yEAAYrC,U;;;;;AACd,2BAAK+G,YAAL,GAAoB,KAAKA,YAAL,CAAkBxE,MAAlB,CAA0B,UAAAvB,CAAC,EAAI;AACjD,+BAAOA,CAAC,CAAC4C,QAAF,KAAea,GAAG,CAACb,QAA1B;AACD,uBAFmB,CAApB;AAGA,2BAAKjC,aAAL;;;;AAIIN,0B,GAAO,MAAH,OAAG,CAAH;AACRmG,mCAAW,EAAE/C,GAAG,CAACb;AADT,uBAAG,EAERa,GAFQ,C;;AAIb,6BAAM,KAAKzB,GAAL,CAASgC,MAAT,CAAgB,+BAAhB,EAAiD3D,IAAjD,EAAuDoE,SAAvD,EAAN;;;AACA,2BAAKsB,YAAL,GAAoB,KAAKA,YAAL,CAAkBxE,MAAlB,CAA0B,UAAAvB,CAAC;AAAA,+BAAIA,CAAC,CAAC4C,QAAF,KAAea,GAAG,CAACb,QAAvB;AAAA,uBAA3B,CAApB;;;;;;;;;AACD;;;+BAEIa,G,EAAiB;AAAA;;AACpB,iBAAK7E,SAAL,CAAe8C,IAAf,CAAoB,aAApB,EAAmC+B,GAAnC;AACA7C,sBAAU,CAAE,UAAAZ,CAAC,EAAI;AACf,qBAAI,CAACiC,MAAL,CAAYgD,QAAZ,CAAqB,CAAC,aAAD,EAAgBxB,GAAG,CAACb,QAApB,CAArB;AACD,aAFS,EAEP,GAFO,CAAV;AAGD;;;0CAEoB;AACnB,iBAAKhE,SAAL,CAAe8C,IAAf,CAAoB,cAApB,EAAoC,KAAKqE,YAAzC;AACD;;;;;;;yBA7NUD,oB,EAAoB,2H,EAAA,+I,EAAA,4J,EAAA,uH;AAAA,O;;;cAApBA,oB;AAAoB,wC;AAAA,iB;AAAA,e;AAAA,umB;AAAA;AAAA;ADlBjC;;AACI;;AACI;;AAAuD;;AAAW;;AACtE;;AACJ;;AAEA;;AACI;;AACI;;AACA;;AAAqD;AAAA,qBAAS,IAAAV,WAAA,CAAY,KAAZ,CAAT;AAA2B,aAA3B;;AAA6B;;AAAmB;;AACzG;;AAEA;;AACI;;AACI;;AACI;;AAAgB;;AAAS;;AACzB;;AAAgB;;AAAW;;AAC3B;;AACJ;;AACJ;;AACA;;AACI;;AAUJ;;AACJ;;AACJ;;AAGA;;AAKI;AAAA,qBAAS,IAAAC,UAAA,EAAT;AAAqB,aAArB,EAAsB,QAAtB,EAAsB;AAAA,qBACZ,IAAAC,UAAA,EADY;AACA,aADtB;;AAGA;;AAaJ;;;;AApCgB;;AAAA;;AAgBZ;;AAAA,4FAAkB,SAAlB,EAAkB,kBAAlB,EAAkB,UAAlB,EAAkB,QAAlB,EAAkB,OAAlB,EAAkB,cAAlB;;AAOyB;;AAAA;;;;;;;;;;wEC1BhBQ,oB,EAAoB;gBALhC,uDAKgC;iBALtB;AACTlE,oBAAQ,EAAE,iBADD;AAETC,uBAAW,EAAE,8BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKsB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAQa2E,a;AAIX,+BACUC,EADV,EACyB;AAAA;;AAAf,eAAAA,EAAA,GAAAA,EAAA;AACL;;;;qCAEG;AACN,iBAAKnH,IAAL,GAAY,KAAKmH,EAAL,CAAQlH,KAAR,CAAc;AACxBmH,kBAAI,EAAE;AADkB,aAAd,CAAZ;AAGD;;;;;;;yBAZUF,a,EAAa,2H;AAAA,O;;;cAAbA,a;AAAa,iC;AAAA,gB;AAAA,e;AAAA,+E;AAAA;AAAA;ACR1B;;AAAG;;AAAW;;AAEd;;AACI;;AACJ;;;;AAFM;;AAAA;;;;;;;;;wEDMOA,a,EAAa;gBALzB,uDAKyB;iBALf;AACT7E,oBAAQ,EAAE,UADD;AAETC,uBAAW,EAAE,uBAFJ;AAGTC,qBAAS,EAAE,CAAC,uBAAD;AAHF,W;AAKe,U","file":"modules-application-application-module-es5.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { LocalDataService } from 'src/app/shared/services/local-data.service';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-application-attribute-options',\r\n  templateUrl: './application-attribute-options.component.html',\r\n  styleUrls: ['./application-attribute-options.component.scss']\r\n})\r\nexport class ApplicationAttributeOptionsComponent implements OnInit {\r\n\r\n  public form: FormGroup;\r\n  public attributeOptions = [];\r\n  public showDescription = true;\r\n  public editId;\r\n  @Input() id: string;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private localdata: LocalDataService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n\r\n    if (environment.staticData){\r\n      const values = this.localdata.get('attributeOptions');\r\n      if (!values){\r\n        return;\r\n      }\r\n\r\n      const attrId = this.id.replace(/\\ /g, '_').toLowerCase();\r\n      this.attributeOptions = values[`attr-opts-${attrId}`] || [];\r\n      return;\r\n    }\r\n  }\r\n\r\n  private buildForm(): void{\r\n    this.form = this.formBuilder.group({\r\n      value: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  add(): void {\r\n    if (this.form.invalid) {\r\n      alert('All fields are required');\r\n      return;\r\n    }\r\n\r\n    const formValues = this.form.value;\r\n\r\n    const translations = formValues.translations.map( x => {\r\n      return {\r\n        keyVal: formValues.value,\r\n        langId: Number(x.language),\r\n        value: x.value\r\n      };\r\n    });\r\n    formValues.translations = translations;\r\n    const data = {\r\n      id: new Date().getTime(),\r\n      value: formValues.value,\r\n      translations,\r\n      default: false\r\n    };\r\n    if (!this.editId) {\r\n      this.attributeOptions.push(data);\r\n    } else {\r\n      this.attributeOptions = this.attributeOptions.map( x => {\r\n        if (x.id === this.editId) {\r\n          return data;\r\n        }\r\n        return x;\r\n      });\r\n    }\r\n\r\n\r\n    this.form.reset();\r\n    this.showDescription = false;\r\n    this.saveLocalData();\r\n    setTimeout( x => {\r\n      this.showDescription = true;\r\n    }, 100);\r\n  }\r\n\r\n  setDefault(id, value): void{\r\n    this.attributeOptions.map( x => {\r\n      if (id === x.id) {\r\n        x.default = !value;\r\n      } else {\r\n        x.default = false;\r\n      }\r\n      return x;\r\n    });\r\n    this.saveLocalData();\r\n  }\r\n\r\n  edit(option): void{\r\n    this.editId = option.id;\r\n    this.form.get('value').patchValue(option.value);\r\n    this.showDescription = false;\r\n    setTimeout( x => {\r\n      this.showDescription = true;\r\n      this.appendCurrentTranslations(option.translations);\r\n    });\r\n  }\r\n\r\n  cancelEdit(): void{\r\n    this.editId = null;\r\n    this.form.reset();\r\n    this.showDescription = false;\r\n    setTimeout( x => {\r\n      this.showDescription = true;\r\n    });\r\n  }\r\n\r\n  private appendCurrentTranslations(translations: any[]): void{\r\n    this.form.removeControl('translations');\r\n    this.form.addControl('translations', this.formBuilder.array([], Validators.required));\r\n\r\n    translations.forEach( x => {\r\n      const group = this.formBuilder.group({\r\n        language: [x.langId.toString(), Validators.required],\r\n        value: [x.value, Validators.required]\r\n      });\r\n      (this.form.get('translations') as FormArray).push(group);\r\n    });\r\n  }\r\n\r\n  delete(id): void{\r\n    const sure = confirm('Are you sure?');\r\n    if (!sure) {\r\n      return;\r\n    }\r\n\r\n    this.attributeOptions = this.attributeOptions.filter( x => x.id !== id);\r\n    this.saveLocalData();\r\n  }\r\n\r\n  private saveLocalData(): void {\r\n    const attrId = this.id.replace(/\\ /g, '_').toLowerCase();\r\n    const toSave = {\r\n      ['attr-opts-' + attrId]: this.attributeOptions\r\n    };\r\n    const oldvalues = this.localdata.get('attributeOptions');\r\n    if (!oldvalues){\r\n      this.localdata.save('attributeOptions', {\r\n        ...toSave\r\n      });\r\n    } else {\r\n      this.localdata.save('attributeOptions', {\r\n        ...oldvalues,\r\n        ...toSave\r\n      });\r\n    }\r\n  }\r\n}\r\n","<ul class=\"nav nav-tabs\" >\r\n    <li class=\"nav-item\">\r\n        <a class=\"nav-link active\">Options</a>\r\n      </li>\r\n</ul>\r\n<form class=\"fform fform--inline optionsForm\" [formGroup]=\"form\">\r\n    <div class=\"form-group flex-2\" >\r\n      <label>Description:</label> \r\n      <app-language-field *ngIf=\"showDescription\" [title]=\"'Description'\" [form]=\"form\"></app-language-field> \r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label>Value: </label>\r\n        <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"value\">\r\n    </div>\r\n    <button type=\"button\" class=\"btn btn-sm  btn-primary\" (click)=\"add()\">{{editId ? 'Update' : 'Add'}}</button>\r\n    <button *ngIf=\"editId\" type=\"button\" class=\"btn btn-sm  btn-secondary\" (click)=\"cancelEdit()\">Cancel</button>\r\n</form>\r\n\r\n<div class=\"table-list optionsList\" >  \r\n    <table class=\"table table-sm\">\r\n        <thead>\r\n            <tr> \r\n                <th scope=\"col\">Description</th>\r\n                <th scope=\"col\">Value</th>\r\n                <th scope=\"col\">Default</th>\r\n                <th scope=\"col\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let option of attributeOptions\"> \r\n                <td>\r\n                    {{option.translations | itranslate}}\r\n                </td>\r\n                <td>\r\n                    {{option.value}}\r\n                </td>\r\n                <td>\r\n                    <div class=\"form-check\">\r\n                        <input \r\n                            (change)=\"setDefault(option.id, option.default)\"\r\n                            type=\"checkbox\" class=\"form-check-input\" [checked]=\"option.default\"> \r\n                    </div>\r\n                </td>\r\n                <td class=\"table-list__actions\">\r\n                    <a (click)=\"edit(option)\">edit</a> | <a (click)=\"delete(option.id)\">delete</a>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>     ","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\"> \r\n        <li class=\"breadcrumb-item\">\r\n            <a [routerLink]=\"['/application']\">Application</a>\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n            {{application.systemId}}\r\n        </li>\r\n    </ol>\r\n</nav>\r\n\r\n\r\n<form [formGroup]=\"applicationForm\" class=\"section application fform fform--inline\">\r\n    <div class=\"form-group form-group-sm\">\r\n        <label>\r\n            System ID:\r\n            <!-- <strong>{{application.systemId}}</strong> -->\r\n        </label>\r\n        <input type=\"text\" class=\"form-control form-control-sm\" formControlName=\"systemId\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label>\r\n            Description:\r\n            <app-language-field [title]=\"'Description'\" [form]=\"applicationForm\"></app-language-field> \r\n            <!-- <strong>{{application.translations | itranslate}}</strong> -->\r\n        </label>\r\n        <!-- <textarea class=\"form-control form-control-sm\" rows=\"3\" readonly></textarea> -->\r\n    </div>  \r\n    <div class=\"form-group\">\r\n        <button class=\"btn btn-sm btn-primary\" (click)=\"update()\">Update</button>\r\n        <button class=\"btn btn-sm btn-secondary\" (click)=\"cancel()\">Cancel</button>\r\n    </div>\r\n</form>\r\n\r\n<div class=\"table-list\">\r\n\r\n    <div class=\"table-list__buttons\">\r\n        <label>Attributes</label>\r\n        <button type=\"button\" class=\"btn btn-sm btn-success\" (click)=\"showAppForm('add')\">Add New Attribute</button>\r\n    </div>\r\n\r\n    <table class=\"table table-sm\">\r\n        <thead>\r\n            <tr> \r\n                <th scope=\"col\">ID</th>\r\n                <th scope=\"col\">Title</th>\r\n                <th scope=\"col\">Type</th>                \r\n                <th scope=\"col\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let attribute of applicationAttributes\"> \r\n                <td>\r\n                    {{attribute.attbId}}\r\n                </td>\r\n                <td>\r\n                    {{ attribute.translations | itranslate }}\r\n                </td>\r\n                <td>\r\n                    {{attribute.attbType}}\r\n                </td>\r\n                <td class=\"table-list__actions\">\r\n                    <!-- <a>view</a> | -->\r\n                    <a (click)=\"showAppForm('edit', attribute)\">edit</a> | \r\n                    <a (click)=\"delete(attribute)\">delete</a>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n\r\n\r\n<app-modal\r\n    class=\"large\"\r\n    [show]=\"showModal\"\r\n    [saveBtn]=\"saveButtonText\"\r\n    [closeBtn]=\"'Cancel'\"\r\n    [title]=\"modalTitle\"\r\n    (close)=\"closeModal()\"\r\n    (submit)=\"submitForm()\"\r\n>\r\n    <!-- <ul class=\"nav nav-tabs\" *ngIf=\"activeTab !== 'options'\">\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link active\">Details</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link\" (click)=\"activeTab='options'\">Options</a>\r\n        </li>\r\n    </ul> -->\r\n    <form [formGroup]=\"form\" class=\"fform fform--inline\">     \r\n        <div *ngIf=\"!editId\" class=\"form-check form-check-inline existingAttribute\">\r\n            <input \r\n                (change)=\"toggleExistingAttribute()\"\r\n                class=\"form-check-input\" type=\"checkbox\" id=\"inlineCheckbox1\" [checked]=\"isExistingAttribute\">               \r\n            <label class=\"form-check-label\" for=\"inlineCheckbox1\">Existing Attribute</label>\r\n        </div>\r\n        <ng-container *ngIf=\"isExistingAttribute\">\r\n            <div class=\"form-group\">\r\n                <label>Attribute: </label> \r\n                <select \r\n                    [ngClass]=\"{'is-invalid': form.controls.existing.invalid && form.controls.existing.touched}\"\r\n                    formControlName=\"existing\" class=\"form-control form-control-sm\">\r\n                    <option></option>\r\n                    <ng-container *ngFor=\"let attr of allAttributes\">\r\n                        <option *ngIf=\"!hasAttribute(attr.attbId)\" [value]=\"attr.attbId\">{{attr.attbId}}</option>\r\n                    </ng-container> \r\n\r\n                </select>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!isExistingAttribute\">\r\n            <div class=\"form-group\">\r\n                <label>ID: </label> \r\n                <input \r\n                    formControlName=\"id\" type=\"text\" class=\"form-control form-control-sm\" \r\n                    [ngClass]=\"{'is-invalid': form.controls.id.invalid && form.controls.id.touched}\">\r\n            </div> \r\n            <div class=\"form-group\">\r\n                <label>Type: </label> \r\n                <select \r\n                    [ngClass]=\"{'is-invalid': form.controls.type.invalid && form.controls.type.touched}\"\r\n                    formControlName=\"type\" class=\"form-control form-control-sm\">\r\n                    <option></option>\r\n                    <option value=\"string\">String</option>\r\n                    <option value=\"numeric\">Numeric</option>\r\n                    <option value=\"boolean\">Boolean</option>\r\n                </select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Title: </label>\r\n                <app-language-field [title]=\"'Title'\" *ngIf=\"showModal\" [form]=\"form\"></app-language-field> \r\n            </div>\r\n        </ng-container>\r\n        \r\n    </form>\r\n    <br>\r\n\r\n    <app-application-attribute-options [id]=\"editId\" *ngIf=\"editId && showModal\"></app-application-attribute-options>\r\n    \r\n     \r\n</app-modal>","import { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { JkWaitService } from 'jk-wait';\r\nimport { ApiService } from 'src/app/shared/services/api.service';\r\nimport { LocalDataService } from 'src/app/shared/services/local-data.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IApplication } from '../application/application.component';\r\n\r\n\r\nexport interface IApplicationAttribute  {\r\n  id: string;\r\n  type: string;\r\n  translations: any[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-application-view',\r\n  templateUrl: './application-view.component.html',\r\n  styleUrls: ['./application-view.component.scss']\r\n})\r\nexport class ApplicationViewComponent implements OnInit {\r\n\r\n  public application: IApplication;\r\n  public applicationAttributes: any[] = [];\r\n  public modalTitle: string;\r\n  public saveButtonText: string;\r\n  public editId: string;\r\n  public form: FormGroup;\r\n  public applicationForm: FormGroup;\r\n  public showModal = false;\r\n  public isExistingAttribute = false;\r\n  public allAttributes = [];\r\n\r\n  // TEMP\r\n  activeTab = 'details';\r\n\r\nconstructor(\r\n    private formBuilder: FormBuilder,\r\n    private localdata: LocalDataService,\r\n    private api: ApiService,\r\n    private router: Router,\r\n    private wait: JkWaitService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.application = this.localdata.get('application');\r\n    this.buildForm();\r\n    setTimeout( x => {\r\n      this.appendCurrentTranslations(this.applicationForm, this.application.translations);\r\n    }, 0);\r\n\r\n    if (environment.staticData){\r\n      const values = this.localdata.get('applicationAttributes');\r\n      this.getAllAttributes();\r\n      if (!values){\r\n        return;\r\n      }\r\n\r\n      const appId = this.application.systemId.replace(/\\ /g, '_').toLowerCase();\r\n      this.applicationAttributes = values[`app-attr-${appId}`] || [];\r\n      return;\r\n    }\r\n\r\n    this.applicationAttributes = [];\r\n    this.getApplicationAttribute(this.application.systemId);\r\n  }\r\n\r\n  getAllAttributes(): any{\r\n    const values = this.localdata.get('applicationAttributes');\r\n    if (!values){\r\n      return;\r\n    }\r\n    Object.values(values).forEach((attrs: any) => {\r\n      this.allAttributes = [\r\n        ...this.allAttributes,\r\n        ...attrs\r\n      ];\r\n    });\r\n    return values;\r\n  }\r\n\r\n  hasAttribute(id): boolean{\r\n    return this.applicationAttributes.filter( x => x.attbId === id).length > 0;\r\n  }\r\n\r\n  toggleExistingAttribute(): void{\r\n    this.isExistingAttribute = !this.isExistingAttribute;\r\n    this.form.reset();\r\n  }\r\n\r\n  private saveLocalData(): void {\r\n    const appId = this.application.systemId.replace(/\\ /g, '_').toLowerCase();\r\n    const toSave = {\r\n      ['app-attr-' + appId]: this.applicationAttributes\r\n    };\r\n    const oldvalues = this.localdata.get('applicationAttributes');\r\n    if (!oldvalues){\r\n      this.localdata.save('applicationAttributes', {\r\n        ...toSave\r\n      });\r\n    } else {\r\n      this.localdata.save('applicationAttributes', {\r\n        ...oldvalues,\r\n        ...toSave\r\n      });\r\n    }\r\n  }\r\n\r\n  getApplicationAttribute(id: string): void{\r\n    this.api.list('applicationroleattribute/getApplicationRoleAttribute', {\r\n      systemId: id\r\n    }).subscribe( x => {\r\n      this.applicationAttributes = x.roleAttr;\r\n      console.log(x.roleAttr);\r\n    });\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = this.formBuilder.group({\r\n      id: ['', [Validators.required]],\r\n      type: ['', [Validators.required]],\r\n      existing: ['', []],\r\n    });\r\n    this.applicationForm = this.formBuilder.group({\r\n      systemId: [this.application.systemId, [Validators.required]]\r\n    });\r\n  }\r\n\r\n\r\n  showAppForm(type: string, app?: any): void {\r\n    if (type === 'add') {\r\n      this.modalTitle = 'New Attibute';\r\n      this.saveButtonText = 'Save';\r\n      this.editId = null;\r\n    } else {\r\n      this.editId = app.attbId;\r\n      this.saveButtonText = 'Update';\r\n      this.modalTitle = `Edit ${app.attbId}`;\r\n      this.form.get('id').patchValue(app.attbId);\r\n      this.form.get('type').patchValue(app.attbType);\r\n      setTimeout( x => {\r\n        this.appendCurrentTranslations(this.form, app.translations);\r\n      }, 0);\r\n    }\r\n\r\n    this.showModal = true;\r\n  }\r\n\r\n  private appendCurrentTranslations(form, translations: any[]): void{\r\n    translations.forEach( x => {\r\n      const group = this.formBuilder.group({\r\n        language: [x.langId.toString(), Validators.required],\r\n        value: [x.value, Validators.required]\r\n      });\r\n      (form.get('translations') as FormArray).push(group);\r\n    });\r\n  }\r\n\r\n  closeModal(): void {\r\n    this.form.reset();\r\n    this.showModal = false;\r\n    this.isExistingAttribute = false;\r\n  }\r\n\r\n\r\n  submitForm(): void{\r\n    this.form.markAllAsTouched();\r\n\r\n    if (this.isExistingAttribute) {\r\n      const attrId = this.form.value.existing;\r\n      if (attrId.length === 0){\r\n        return;\r\n      }\r\n      const attribute = this.allAttributes.filter( x => x.attbId === attrId)[0];\r\n      this.applicationAttributes.push(attribute);\r\n      this.saveLocalData();\r\n      this.form.reset();\r\n      this.showModal = false;\r\n      this.isExistingAttribute = false;\r\n      return;\r\n    }\r\n\r\n    if (this.form.invalid) {\r\n      alert('All fields are required');\r\n      return;\r\n    }\r\n\r\n    const {id, type, translations}: IApplicationAttribute = this.form.value;\r\n\r\n    const data = {\r\n      attbId: id,\r\n      attbType: type,\r\n      attbTitle: id,\r\n      systemId: this.application.systemId,\r\n      translations: translations.map( x => {\r\n        return {\r\n          keyVal: id,\r\n          langId: Number(x.language),\r\n          value: x.value\r\n        };\r\n      })\r\n    };\r\n\r\n    if (!this.editId) {\r\n      if (environment.staticData) {\r\n        this.applicationAttributes.push(data);\r\n        this.saveLocalData();\r\n        this.editId = id;\r\n        this.modalTitle = 'Edit ' + id;\r\n        this.saveButtonText = 'Update';\r\n        // this.form.reset();\r\n        return;\r\n      }\r\n\r\n      this.api.create('roleattribute/createRoleAttribute', data).subscribe( x => {\r\n        this.showModal = false;\r\n        this.form.reset();\r\n      });\r\n    } else {\r\n      this.updateAttribute(data, this.editId);\r\n    }\r\n  }\r\n\r\n  updateAttribute(data, oldId): void {\r\n\r\n    if (environment.staticData) {\r\n\r\n      // update options id if id changed\r\n      if (oldId !== data.attbId) {\r\n          let allOptions = this.localdata.get('attributeOptions');\r\n          if (Object.keys(allOptions).length > 0) {\r\n            const attrId = oldId.replace(/\\ /g, '_').toLowerCase();\r\n            const atributeOptions = allOptions['attr-opts-' + attrId];\r\n            delete allOptions['attr-opts-' + attrId];\r\n            const newAttrId = data.attbId.replace(/\\ /g, '_').toLowerCase();\r\n            allOptions = {\r\n              ...allOptions,\r\n              ['attr-opts-' + newAttrId] : atributeOptions\r\n            };\r\n            this.localdata.save('attributeOptions', allOptions);\r\n          }\r\n      }\r\n\r\n\r\n      this.applicationAttributes = this.applicationAttributes.filter( x => x.attbId !== oldId);\r\n      this.applicationAttributes.push(data);\r\n      this.saveLocalData();\r\n      this.form.reset();\r\n      this.showModal = false;\r\n      return;\r\n    }\r\n\r\n    this.api.create('roleattribute/updateRoleAttribute', {\r\n      ...data,\r\n      oldAttbId: oldId,\r\n    }).subscribe( x => {\r\n      this.showModal = false;\r\n      this.form.reset();\r\n    });\r\n  }\r\n\r\n  async delete(app: any): Promise<any> {\r\n    const sure = confirm('Are you sure?');\r\n    if (!sure){\r\n      return;\r\n    }\r\n\r\n    if (environment.staticData) {\r\n      this.applicationAttributes = this.applicationAttributes.filter( x => x.attbId !== app.attbId);\r\n      this.saveLocalData();\r\n      return;\r\n    }\r\n    const data = {\r\n      roleAttributeId: app.attbId,\r\n      systemId: this.application.systemId\r\n    };\r\n    await this.api.create('applicationroleattribute/deleteApplicationRoleAttribute', data).toPromise();\r\n    this.applicationAttributes = this.applicationAttributes.filter( x => app.attbId !== x.attbId);\r\n  }\r\n\r\n\r\n  update(): void {\r\n    const formValue = this.applicationForm.value;\r\n    const translations = formValue.translations.map( x => {\r\n      return {\r\n        keyVal: formValue.systemId,\r\n        langId: Number(x.language),\r\n        value: x.value\r\n      };\r\n    });\r\n    // const updateData = {\r\n    //   oldSystemId: this.application.systemId,\r\n    //   systemDescription: formValue.systemId,\r\n    //   systemId: formValue.systemId,\r\n    //   translations,\r\n    // };\r\n\r\n    // update application attributes id if id changed\r\n    if (this.application.systemId !== formValue.systemId) {\r\n      let allAttributes = this.localdata.get('applicationAttributes');\r\n      if (Object.keys(allAttributes).length > 0) {\r\n        const appId = this.application.systemId.replace(/\\ /g, '_').toLowerCase();\r\n        const appAtribute = allAttributes['app-attr-' + appId];\r\n        delete allAttributes['app-attr-' + appId];\r\n        const newAppId = formValue.systemId.replace(/\\ /g, '_').toLowerCase();\r\n        allAttributes = {\r\n          ...allAttributes,\r\n          ['app-attr-' + newAppId] : appAtribute\r\n        };\r\n        this.localdata.save('applicationAttributes', allAttributes);\r\n      }\r\n    }\r\n\r\n    this.localdata.save('application' , {\r\n      systemId: formValue.systemId,\r\n      systemDescription: formValue.systemId,\r\n      translations,\r\n    });\r\n\r\n    const apps = this.localdata.get('applications').map( x => {\r\n      if (x.systemId === this.application.systemId) {\r\n        x.systemId = formValue.systemId;\r\n        x.systemDescription = formValue.systemId;\r\n        x.translations = translations;\r\n      }\r\n      return x;\r\n    });\r\n    this.localdata.save('applications' , apps);\r\n\r\n    this.wait.start();\r\n    setTimeout( x => {\r\n      alert('Success');\r\n      this.wait.end();\r\n    }, 500);\r\n\r\n  }\r\n\r\n\r\n  cancel(): void{\r\n    this.router.navigate(['application']);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ApplicationComponent } from './application/application.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { ApplicationViewComponent } from './application-view/application-view.component';\r\nimport { TestComponent } from './test/test.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { ApplicationAttributeOptionsComponent } from './application-attribute-options/application-attribute-options.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ApplicationComponent\r\n  },\r\n  {\r\n    path: ':id',\r\n    component: ApplicationViewComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ApplicationComponent,\r\n    ApplicationViewComponent,\r\n    TestComponent,\r\n    ApplicationAttributeOptionsComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    RouterModule.forChild(routes)\r\n  ]\r\n})\r\nexport class ApplicationModule { }\r\n","<nav aria-label=\"breadcrumb\">\r\n    <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Application</li>\r\n    </ol>\r\n</nav>\r\n\r\n<div class=\"table-list\">\r\n    <div class=\"table-list__buttons\">\r\n        <label></label>\r\n        <button type=\"button\" class=\"btn btn-sm btn-primary\" (click)=\"showAppForm('add')\">Add New Application</button>\r\n    </div>\r\n\r\n    <table class=\"table table-sm\">\r\n        <thead>\r\n            <tr> \r\n                <th scope=\"col\">System ID</th>\r\n                <th scope=\"col\">Description</th>\r\n                <th scope=\"col\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let app of applications\"> \r\n                <td>{{app.systemId}} </td>\r\n                <td>{{app.translations | itranslate}}</td>\r\n                <td class=\"table-list__actions\">\r\n                    <!-- <a (click)=\"view(app)\">view</a> | \r\n                    <a (click)=\"showAppForm('edit', app)\">edit</a> |  -->\r\n                    <a (click)=\"view(app)\">edit</a>\r\n                    <a (click)=\"delete(app)\">delete</a>\r\n                </td>\r\n            </tr> \r\n        </tbody>\r\n    </table>\r\n</div>\r\n\r\n\r\n<app-modal\r\n    [show]=\"showModal\"\r\n    [saveBtn]=\"saveButtonText\"\r\n    [closeBtn]=\"'Cancel'\"\r\n    [title]=\"modalTitle\"\r\n    (close)=\"closeModal()\"\r\n    (submit)=\"submitForm()\"\r\n>\r\n    <form [formGroup]=\"form\" *ngIf=\"form\">\r\n        <div class=\"form-group\">\r\n            <label>System ID</label> \r\n            <input \r\n              formControlName=\"systemId\" type=\"text\" class=\"form-control\" \r\n              [ngClass]=\"{'is-invalid': form.controls.systemId.invalid && form.controls.systemId.touched}\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>Description: </label>\r\n            <!-- <textarea formControlName=\"description\" type=\"text\" class=\"form-control\" ></textarea> -->\r\n            <app-language-field [title]=\"'Description'\" [form]=\"form\" *ngIf=\"showModal\"></app-language-field> \r\n        </div>\r\n    </form>\r\n</app-modal>","import { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { timestamp } from 'rxjs/operators';\r\nimport { ApiService } from 'src/app/shared/services/api.service';\r\nimport { LocalDataService } from 'src/app/shared/services/local-data.service';\r\nimport { environment } from 'src/environments/environment';\r\n\r\nexport interface IApplication  {\r\n  systemId: string;\r\n  translations?: any[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-application',\r\n  templateUrl: './application.component.html',\r\n  styleUrls: ['./application.component.scss']\r\n})\r\nexport class ApplicationComponent implements OnInit {\r\n\r\n  public language = environment.language;\r\n  public modalTitle: string;\r\n  public saveButtonText = 'Save';\r\n  public form: FormGroup;\r\n  public descriptionForm: FormGroup;\r\n  public showModal = false;\r\n  public editId: string;\r\n\r\n  applications = [\r\n    {\r\n      systemId: 'SVC',\r\n      systemDescription: 'SVC',\r\n      translations: [\r\n        {\r\n          id: 1,\r\n          keyVal: 'SVC',\r\n          langId: 1,\r\n          value: 'Single View Customer'\r\n        },\r\n        {\r\n          id: 2,\r\n          keyVal: 'SVC',\r\n          langId: 2,\r\n          value: '单视图客户'\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private api: ApiService,\r\n    private localdata: LocalDataService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n\r\n    if (environment.staticData){\r\n\r\n      if (!this.localdata.get('applications')){\r\n        this.localdata.save('applications', this.applications);\r\n      } else {\r\n        this.applications = this.localdata.get('applications');\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    this.loadData();\r\n  }\r\n\r\n  private async loadData(): Promise<any>{\r\n    this.applications = [];\r\n    const list =  await this.api.list('application/getAllApplication').toPromise();\r\n    this.applications = list.lstApplications;\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = this.formBuilder.group({\r\n      systemId: ['', [Validators.required]],\r\n    });\r\n  }\r\n\r\n  showAppForm(type: string, app?: IApplication): void {\r\n    if (type === 'add') {\r\n      this.modalTitle = 'New Application';\r\n      this.saveButtonText = 'Save';\r\n      this.editId = null;\r\n    } else {\r\n      this.saveButtonText = 'Update';\r\n      this.modalTitle = `Edit ${app.systemId}`;\r\n      this.editId = app.systemId;\r\n      this.form.get('systemId').patchValue(app.systemId);\r\n      setTimeout( x => {\r\n        this.appendCurrentTranslations(app.translations);\r\n      }, 0);\r\n    }\r\n\r\n    this.showModal = true;\r\n  }\r\n\r\n  private appendCurrentTranslations(translations: any[]): void{\r\n    translations.forEach( x => {\r\n      const group = this.formBuilder.group({\r\n        language: [x.langId.toString(), Validators.required],\r\n        value: [x.value, Validators.required]\r\n      });\r\n      (this.form.get('translations') as FormArray).push(group);\r\n    });\r\n  }\r\n\r\n  closeModal(): void {\r\n    this.form.reset();\r\n    this.showModal = false;\r\n  }\r\n\r\n\r\n  async submitForm(): Promise<any> {\r\n    this.form.markAllAsTouched();\r\n    const {systemId, translations}: IApplication = this.form.value;\r\n    if (this.form.invalid) {\r\n      alert('All fields are required');\r\n      return;\r\n    }\r\n\r\n    if (!this.englishExist(translations)) {\r\n      alert('English translation is required');\r\n      return;\r\n    }\r\n\r\n    this.showModal = false;\r\n    const descriptions = translations.map( x => {\r\n      return {\r\n        keyVal: systemId,\r\n        langId: Number(x.language),\r\n        value: x.value\r\n      };\r\n    });\r\n\r\n    const data = {\r\n      systemDescription: systemId,\r\n      systemId,\r\n      translations: descriptions\r\n    };\r\n\r\n    if (this.modalTitle.includes('Edit')) {\r\n      // await this.updateApplication(data);\r\n      return;\r\n    }\r\n    await this.createApplication(data);\r\n  }\r\n\r\n\r\n  // async updateApplication(data): Promise<any>{\r\n  //   const updateData = {\r\n  //     oldSystemId: this.editId,\r\n  //     ...data\r\n  //   };\r\n\r\n  //   if (environment.staticData){\r\n  //     this.updateApplicationList(data.systemId, updateData.translations);\r\n  //     this.saveLocalData();\r\n  //     return;\r\n  //   }\r\n\r\n  //   const updated = await this.api.create('application/updateApplication', updateData).toPromise();\r\n  //   this.updateApplicationList(data.systemId, updated.application.translations);\r\n  //   this.form.reset();\r\n  // }\r\n\r\n  private updateApplicationList(systemId, translations): void{\r\n    this.applications = this.applications.map( x => {\r\n      if ( x.systemId === this.editId ) {\r\n        x.systemId = systemId;\r\n        x.translations = translations;\r\n      }\r\n      return x;\r\n    });\r\n  }\r\n\r\n  async createApplication(data): Promise<any>{\r\n    if (environment.staticData){\r\n      this.applications.push({\r\n        systemId: data.systemId,\r\n        systemDescription: data.systemId,\r\n        translations: data.translations.map( x => {\r\n          return {\r\n            id: new Date().getTime(),\r\n            ...x\r\n          };\r\n        })\r\n      });\r\n      this.saveLocalData();\r\n      this.form.reset();\r\n      return;\r\n    }\r\n    const saved = await this.api.create('application/createApplication', data).toPromise();\r\n    this.form.reset();\r\n    this.applications.push(saved.application);\r\n  }\r\n\r\n  englishExist(translations): boolean {\r\n    const found = translations.filter( x => x.language === '1').length > 0;\r\n    return found;\r\n  }\r\n\r\n  async delete(app: IApplication): Promise<any> {\r\n    const sure = confirm('Are you sure?');\r\n    if (!sure){\r\n      return;\r\n    }\r\n\r\n    if (environment.staticData){\r\n      this.applications = this.applications.filter( x => {\r\n        return x.systemId !== app.systemId;\r\n      });\r\n      this.saveLocalData();\r\n      return;\r\n    }\r\n\r\n    const data = {\r\n      oldSystemId: app.systemId,\r\n      ...app\r\n    };\r\n    await this.api.create('application/deleteApplication', data).toPromise();\r\n    this.applications = this.applications.filter( x => x.systemId !== app.systemId);\r\n  }\r\n\r\n  view(app: IApplication): void{\r\n    this.localdata.save('application', app);\r\n    setTimeout( x => {\r\n      this.router.navigate(['application', app.systemId]);\r\n    }, 250);\r\n  }\r\n\r\n  private saveLocalData(): void{\r\n    this.localdata.save('applications', this.applications);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-test',\r\n  templateUrl: './test.component.html',\r\n  styleUrls: ['./test.component.scss']\r\n})\r\nexport class TestComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private fb: FormBuilder\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.fb.group({\r\n      name: 'test'\r\n    });\r\n  }\r\n\r\n}\r\n","<p>test works!</p>\r\n\r\n<form [formGroup]=\"form\">\r\n    <input type=\"text\" formControlName=\"name\">\r\n</form>"]}